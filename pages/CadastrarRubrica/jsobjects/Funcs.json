{
  "unpublishedCollection": {
    "name": "Funcs",
    "pageId": "CadastrarRubrica",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tcadastrar_rubrica: async (info) => {\n\t\t\treturn await CadastroRubricaAPI.run({ rubricaDados : { \"id\" : info.id, \"descricao\" : info.descricao } }).then(async () => {\n\t\t\t\t\tawait showAlert(\"Rubrica cadastrada\");\n\t\t\t\t\treturn true;\n\t\t\t}).catch( async () => {\n\t\t\t\t\tawait showAlert(\"Erro ao criar rubrica\");\n\t\t\t\t\treturn false;\n\t\t\t})\n\t},\n\tverificar_validade_id: async (param) => {\n\t\t\tvar id = parseInt(param.replaceAll('.', ''))\n\t\t\tawait storeValue('parsed_id', id)\n\t\t\treturn await VerificarDisponibilidadeAPI.run().then(() => {\n\t\t\t\t\treturn true;\n\t\t\t}).catch(() => {\n\t\t\t\t\treturn false;\n\t\t\t})\n\t},\n\tcarregar_rubricas: async () => {\n\t\t\tlet data_rubrica  = await ObterRubricasAPI.run().catch(() => { showAlert(\"Erro na requisição dos dados de rubricas\") })\n\t\t\n\t\t\tawait storeValue(\"rubricas_2\", data_rubrica)\n\t\t\tawait showAlert(\"Tudo carregado\")\n\t},\n\tsalvar_rubrica: async () => {\n\t\t\tif(Table1.isAddRowInProgress) {\n\t\t\t\t\tif(Table1.newRow.id.match(/^[1-3].[0-3].[0-3]$/)) {\n\t\t\t\t\t\t\tif(await Funcs.verificar_validade_id(Table1.newRow.id)) {\n\t\t\t\t\t\t\t\t\tvar data = Table1.tableData;\n\t\t\t\t\t\t\t\t\tif(data) {\n\t\t\t\t\t\t\t\t\t\t\tdata.push(Table1.newRow);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tdata = [Table1.newRow]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif(await Funcs.cadastrar_rubrica(Table1.newRow)) {\n\t\t\t\t\t\t\t\t\t\t\tawait storeValue('rubricas_2', data);\n\t\t\t\t\t\t\t\t\t}\t\t\t\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tawait showAlert('O id da rubrica já existe')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tawait showAlert('O id da rubrica nao está no formato correto');\n\t\t\t\t\t}\n\t\t\t}\n\t}\n}",
    "variables": [],
    "userPermissions": []
  },
  "id": "CadastrarRubrica_Funcs",
  "deleted": false,
  "gitSyncId": "637d55b1cbb10813d213d9ed_63c68273ff1c07648e0b4e89"
}